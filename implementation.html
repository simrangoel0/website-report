<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Blueprint AI - Implementation</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Your Custom CSS -->
    <link rel="stylesheet" href="styles.css" />
    <!-- Font Awesome (if needed) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <header>
      <!-- Navigation Bar -->
      <nav class="navbar navbar-expand-lg">
        <div class="container">
          <!-- Logo/Brand -->
          <a class="navbar-brand" href="index.html">
            <img
              src="logoText.png"
              alt="Blueprint AI Logo"
              class="navbar-logo"
            />
          </a>
          <!-- Toggle for mobile view -->
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Nav links -->
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <!-- Home Link -->
              <li class="nav-item">
                <a class="nav-link" href="index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="requirements.html">Requirements</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="research.html">Research</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="ui-design.html">UI Design</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="system-design.html">System Design</a>
              </li>

              <!-- Implementation link with dynamic dropdown -->
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle active"
                  href="implementation.html"
                  id="implementationDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Implementation
                </a>
                <!-- Dynamically populated dropdown menu -->
                <ul
                  class="dropdown-menu"
                  aria-labelledby="implementationDropdown"
                  id="implementationDropdownMenu"
                >
                  <!-- Items will be injected by script below -->
                </ul>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="testing.html">Testing</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="evaluation.html">Evaluation</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="appendices.html">Appendices</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="blog.html">Blog</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Page Title/Intro -->
      <h1 class="my-5">Implementation</h1>
      <p>
        Details the integration of packages, frameworks, and core
        functionalities that bring the system to life.
      </p>
    </header>

    <!-- Main Content -->
    <main class="container flex-grow-1">
      <section id="key-features" class="mb-5">
        <h2>Key Features</h2>
        <p>
          Highlight the main features implemented, code snippets, and how they
          work.
        </p>
      </section>

      <section
        id="packages-and-apis-defined"
        class="mb-5"
        style="position: relative"
      >
        <h2>Packages and APIs</h2>

        <!-- Logo Container in a Simple Grid -->
        <div class="container mb-5">
          <h3 class="mt-0 mb-3 text-center">Key Technologies</h3>
          <div class="row gy-4">
            <!-- React -->
            <div class="col-sm-6 col-lg-4">
              <div class="text-center border rounded p-3 bg-white">
                <img
                  src="/implementation-assets/react.png"
                  alt="React logo"
                  style="width: 80px"
                  class="mb-2"
                />
                <h4 class="my-1">React</h4>
                <hr class="my-2" />
                <p class="small mb-0">
                  Primarily used for building the web UI for the VS Code
                  extension, providing a component-based approach for rendering
                  the interactive front-end.
                </p>
              </div>
            </div>

            <!-- CraftJS -->
            <div class="col-sm-6 col-lg-4">
              <div class="text-center border rounded p-3 bg-white">
                <img
                  src="/implementation-assets/craftJS.png"
                  alt="CraftJS logo"
                  style="width: 80px"
                  class="mb-2"
                />
                <h4 class="my-1">CraftJS</h4>
                <hr class="my-2" />
                <p class="small mb-0">
                  Provides a drag-and-drop design layer, enabling dynamic page
                  editing and layout manipulation inside the custom interface.
                </p>
              </div>
            </div>

            <!-- Fluent UI -->
            <div class="col-sm-6 col-lg-4">
              <div class="text-center border rounded p-3 bg-white">
                <img
                  src="/implementation-assets/fluentui.png"
                  alt="Fluent UI logo"
                  style="width: 80px"
                  class="mb-2"
                />
                <h4 class="my-1">Fluent UI</h4>
                <hr class="my-2" />
                <p class="small mb-0">
                  Leverages Microsoft’s design language and components for
                  consistent styling and responsive elements across the
                  extension’s UI.
                </p>
              </div>
            </div>

            <!-- Node.js -->
            <div class="col-sm-6 col-lg-4">
              <div class="text-center border rounded p-3 bg-white">
                <img
                  src="/implementation-assets/nodeJS.png"
                  alt="Node.js logo"
                  style="width: 80px"
                  class="mb-2"
                />
                <h4 class="my-1">Node.js</h4>
                <hr class="my-2" />
                <p class="small mb-0">
                  Powers the backend side of the extension environment,
                  facilitating scripts, package management, and interactions
                  with VS Code APIs.
                </p>
              </div>
            </div>

            <!-- TypeScript -->
            <div class="col-sm-6 col-lg-4">
              <div class="text-center border rounded p-3 bg-white">
                <img
                  src="/implementation-assets/typescript.png"
                  alt="TypeScript logo"
                  style="width: 80px"
                  class="mb-2"
                />
                <h4 class="my-1">TypeScript</h4>
                <hr class="my-2" />
                <p class="small mb-0">
                  Ensures robust typing and improved developer experience
                  throughout the codebase, reducing runtime errors and enhancing
                  scalability.
                </p>
              </div>
            </div>

            <!-- Python / Axios -->
            <div class="col-sm-6 col-lg-4">
              <div class="text-center border rounded p-3 bg-white">
                <div class="d-flex justify-content-center mb-2">
                  <img
                    src="/implementation-assets/python.png"
                    alt="Python logo"
                    style="width: 80px"
                    class="me-2"
                  />
                </div>
                <h4 class="my-1">Python / Axios</h4>
                <hr class="my-2" />
                <p class="small mb-0">
                  Python powers backend automation and OCR processing, while
                  Axios is used for efficient HTTP requests and data integration
                  in the frontend.
                </p>
              </div>
            </div>
          </div>
        </div>

        <p>
          Below is a definitive list of the relevant packages, modules, and APIs
          used throughout the system, as provided in the prompt. The project
          consists of both Node.js packages (for the VS Code extension and web
          UI) and Python packages (for the OCR functionality). It also defines
          specific internal APIs and functions that handle AI requests, OCR, and
          layout generation.
        </p>

        <h3>Node.js Packages</h3>
        <ul>
          <li>@babel/core@7.26.0</li>
          <li>@craftjs/core@0.2.11</li>
          <li>@craftjs/layers@0.2.6</li>
          <li>@emotion/react@11.14.0</li>
          <li>@emotion/styled@11.14.0</li>
          <li>@eslint/js@9.17.0</li>
          <li>@fluentui/react@8.122.5</li>
          <li>@fullhuman/postcss-purgecss@7.0.2</li>
          <li>@monaco-editor/react@4.7.0</li>
          <li>@mui/icons-material@6.3.1</li>
          <li>@mui/material@6.3.1</li>
          <li>@mui/system@6.4.0</li>
          <li>@types/classnames@2.3.0</li>
          <li>@types/file-saver@2.0.7</li>
          <li>@types/js-beautify@1.14.3</li>
          <li>@types/node@22.10.6</li>
          <li>@types/react-color@3.0.13</li>
          <li>@types/react-dom@18.3.5</li>
          <li>@types/react-grid-layout@1.3.5</li>
          <li>@types/react@18.3.18</li>
          <li>@types/styled-components@5.1.34</li>
          <li>@types/uuid@10.0.0</li>
          <li>@vitejs/plugin-react-swc@3.7.2</li>
          <li>autoprefixer@10.4.20</li>
          <li>babel-plugin-inline-react-svg@2.0.2</li>
          <li>classnames@2.5.1</li>
          <li>cross-env@7.0.3</li>
          <li>cssnano@7.0.6</li>
          <li>debounce@2.2.0</li>
          <li>eslint-plugin-react-hooks@5.1.0</li>
          <li>eslint-plugin-react-refresh@0.4.16</li>
          <li>eslint@9.17.0</li>
          <li>file-saver@2.0.5</li>
          <li>globals@15.14.0</li>
          <li>js-beautify@1.15.4</li>
          <li>jszip@3.10.1</li>
          <li>konva@9.3.18</li>
          <li>lzutf8@0.6.3</li>
          <li>monaco-editor@0.52.2</li>
          <li>postcss-import@16.1.0</li>
          <li>postcss-preset-env@10.1.3</li>
          <li>postcss@8.5.0</li>
          <li>re-resizable@6.10.3</li>
          <li>react-color@2.19.3</li>
          <li>react-colorful@5.6.1</li>
          <li>react-contenteditable@3.3.7</li>
          <li>react-dom@18.3.1</li>
          <li>react-grid-layout@1.5.0</li>
          <li>react-icons@5.5.0</li>
          <li>react-konva@18.2.10</li>
          <li>react-loading@2.0.3</li>
          <li>react-player@2.16.0</li>
          <li>react-rnd@10.4.14</li>
          <li>react-router-dom@7.1.1</li>
          <li>react-router@7.1.1</li>
          <li>react-youtube@10.1.0</li>
          <li>react@18.3.1</li>
          <li>sharp@0.33.5</li>
          <li>styled-components@6.1.14</li>
          <li>tailwindcss@3.4.17</li>
          <li>typescript-eslint@8.19.1</li>
          <li>typescript@5.6.3</li>
          <li>uuid@11.0.4</li>
          <li>vite@5.4.11</li>
        </ul>

        <h3>Python Packages (OCR Script)</h3>
        <ul>
          <li>numpy</li>
          <li>opencv-python-headless</li>
          <li>easyocr (installed automatically with PyTorch)</li>
        </ul>

        <h3>Internal AI and OCR APIs</h3>
        <ul>
          <li>
            <strong>getBlueprintLayout(...)</strong><br />
            Main entry point for AI-based layout generation. Accepts user text
            and optional screenshot to produce a final single-page CraftJS
            layout in JSON form.
          </li>
          <li>
            <strong>getSummariesFromScreenshot(...)</strong><br />
            Handles screenshot data by running OCR (via
            <code>runPythonOcr(...)</code> and <code>ocr_service.py</code>) and
            then generating <em>uiSummary</em> and <em>guiSummary</em> through
            AI calls.
          </li>
          <li>
            <strong>runPythonOcr(...)</strong><br />
            Invokes the Python script <code>ocr_service.py</code> to extract
            textual content from an image using EasyOCR.
          </li>
          <li>
            <strong>getUiSummary(...)</strong> and
            <strong>getGuiSummary(...)</strong><br />
            Summaries of textual content (UI elements) and visual layout (GUI
            structure) derived from screenshot OCR data. Uses OpenAI with
            specialized prompts (<em>UI_SUMMARY_META_PROMPT</em> and
            <em>GUI_SUMMARY_META_PROMPT</em>).
          </li>
          <li>
            <strong>getFinalCraftJsLayout(...)</strong><br />
            Synthesizes the final CraftJS layout JSON from user input and the
            screenshot summaries, leveraging
            <em>FINAL_CRAFTJS_META_PROMPT</em>.
          </li>
          <li>
            <strong>callOpenAiChat(...)</strong><br />
            A helper for all OpenAI requests. Chooses the model based on whether
            a screenshot is involved. Returns the raw text response from OpenAI.
          </li>
        </ul>

        <h3>Key Frontend Modules</h3>
        <ul>
          <li>
            <strong>AiSidebar.tsx</strong>: Handles the user chat flow (prompt +
            optional image). Sends messages to
            <code>blueprintAI.generateLayout</code> and receives AI layout
            results.
          </li>
          <li>
            <strong>SuggestedPages.tsx</strong> and
            <strong>CreateSelectedPage.tsx</strong>: Provide suggested page
            names, allow prompting with text and an optional image, and post to
            <code>blueprintAI.generateLayoutSuggested</code>.
          </li>
          <li>
            <strong>BlueprintAiService.ts</strong>,
            <strong>pythonBridge.ts</strong>, and
            <strong>getSummariesFromScreenshot.ts</strong>: Coordinate calls to
            OpenAI and the OCR Python script, returning final layout data.
          </li>
        </ul>
      </section>
    </main>

    <!-- Footer -->
    <footer class="text-center py-4 mt-auto">
      <div
        class="footer-logos d-flex justify-content-center align-items-center"
      >
        <a href="https://www.ucl.ac.uk" target="_blank">
          <img src="ucl.png" alt="UCL Logo" class="footer-logo" />
        </a>
        <a href="https://www.microsoft.com" target="_blank">
          <img src="microsoft.png" alt="Microsoft Logo" class="footer-logo" />
        </a>
        <a href="https://github.com/YOUR_GITHUB" target="_blank">
          <i class="fa-brands fa-square-github"></i>
        </a>
      </div>
    </footer>

    <!-- Bootstrap JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script to dynamically populate dropdown with all headings (h2-h6) inside main -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const dropdownMenu = document.getElementById(
          'implementationDropdownMenu'
        );
        if (!dropdownMenu) return;

        // Select every heading h2 through h6 within the <main> element
        const headings = document.querySelectorAll('main h2, main h3');

        headings.forEach((heading) => {
          // If heading doesn't have an ID, generate one from its text
          if (!heading.id) {
            const generatedId = heading.textContent
              .trim()
              .toLowerCase()
              .replace(/\s+/g, '-')
              .replace(/[^\w-]+/g, '');
            heading.id = generatedId;
          }

          // Create dropdown item
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.classList.add('dropdown-item');
          a.textContent = heading.textContent;
          a.href = `#${heading.id}`;
          li.appendChild(a);
          dropdownMenu.appendChild(li);
        });
      });
    </script>
    <!-- Optional custom scripts -->
    <script src="script.js"></script>
  </body>
</html>
